#!/bin/bash

# create the file and write the text
echo -e "clear\n#we should add the below line in the path /root/.bashrc\n#we add this to send notification every time we login in server\n#source /alscospider/login.alsco\n\n##############################Start-Here#########################################\n#ALSCO Notification \n#################################################################################\n\nlinux_server_IP=\$(curl https://cpanel.net/showip.shtml)\n\n########################################\nALSCOhostname=\$(hostname -I)\necho \"\$ALSCOhostname\"\n########################################\n\n\n##############################################################################\n#Exit if IP is Admin\nUserIP_checking=\$(echo \$SSH_CLIENT | awk '{ print \$1}')\n\nalsco_ip_array=('50.253.239.113' '50.253.239.114' '50.253.239.115' '50.253.239.116' '50.253.239.117' '66.111.53.19')\n\nif grep -q \"\$UserIP_checking\" <<< \"\${alsco_ip_array[@]}\"\nthen\n    echo \"\$UserIP_checking\" ==> \"match found\"\n    exit\n\nfi\n##############################################################################\n\n\n\n\n#remove space from hostname\n#linux_server_IP=AlertServer:\$(hostname -I | sed 's/\s\+//g')\n\n\n#remove new line from list of current login IP\n#UserIP=ClinetIP-\$(who | awk '{print \$5}' | tr '\n' '-')\n\n\nUserIP=\$(echo \$SSH_CLIENT | awk '{ print \$1}')\n\n\n\n\necho \"\$SerHOST\"\necho \"\$UserIP\"\n\n\n\nPIC=\"2\"\nSOUND=\"police.caf\"\nURL=\"https://mobile.alscosupport.com/app/one/sendone.php\"\nDEVICE=\"mohammed\"\n\ncurl -A \"Mozilla()\" --max-time 5 ''\$URL'?name='\$DEVICE'&body='Login%20From-\$UserIP'&sound='\$SOUND'&link='en'&image='\$PIC'&title='SSH%20Login%20Alert-\$linux_server_IP'&category='Server_SSH_Login'&client_ip='\$linux_server_IP''\n\n\n##########################################################################################\n#Done\n#######################################Done-Here##########################################" > /root/login_alert.sg
